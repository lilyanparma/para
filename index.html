<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- عنوان الموقع يتم تحديثه عبر الترجمة -->
  <title data-translate="site_title">PARAMEDICAL LILYAN ROSE</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Font Awesome للأيقونات -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- مكتبة AOS لتأثيرات التمرير -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    /* إعادة تعيين الإعدادات العامة */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Tajawal', Arial, sans-serif;
      direction: rtl;
      overflow-x: hidden;
      background-color: #fff9fb;
      transition: all 0.4s ease;
      min-height: 100vh;
      position: relative;
      padding-bottom: 60px;
      color: #333;
      line-height: 1.6;
    }
    /* الهيدر */
    header {
      background: linear-gradient(135deg, #ff66b2, #ff8fab);
      color: white;
      padding: 18px 0;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 12px rgba(255,102,178,0.2);
      z-index: 100;
    }
    header h1 {
      margin: 0;
      font-size: 1.6em;
      padding: 0 60px;
      font-weight: 700;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    /* زر القائمة (الهامبرغر) */
    .hamburger {
      position: absolute;
      top: 50%;
      left: 20px;
      transform: translateY(-50%);
      font-size: 26px;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s cubic-bezier(0.25,0.8,0.25,1);
      color: white;
    }
    .hamburger:hover {
      transform: translateY(-50%) scale(1.1);
    }
    .hamburger:active {
      transform: translateY(-50%) rotate(90deg);
    }
    /* زر تبديل اللغة */
    .translate-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      font-size: 14px;
      padding: 8px 14px;
      cursor: pointer;
      background-color: white;
      color: #d23369;
      border: none;
      border-radius: 25px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 102;
      box-shadow: 0 3px 8px rgba(210,51,105,0.2);
      transition: all 0.3s ease;
      font-weight: 500;
      white-space: nowrap;
    }
    .translate-btn:hover {
      background-color: #fce4ed;
      transform: translateY(-50%) scale(1.05);
      box-shadow: 0 4px 12px rgba(210,51,105,0.3);
    }
    .translate-btn:active {
      transform: translateY(-50%) scale(0.95);
    }
    /* القائمة الجانبية */
    .sidebar {
      position: fixed;
      top: 0;
      bottom: 0;
      right: -280px;
      width: 280px;
      background-color: white;
      padding: 25px;
      overflow-y: auto;
      transition: right 0.4s cubic-bezier(0.22,0.61,0.36,1);
      z-index: 1000;
      box-shadow: -8px 0 25px rgba(255,102,178,0.15);
    }
    .sidebar.active {
      right: 0;
    }
    .close-btn {
      position: absolute;
      top: 18px;
      left: 18px;
      font-size: 30px;
      background: none;
      border: none;
      cursor: pointer;
      color: #888;
      transition: all 0.3s ease;
    }
    .close-btn:hover {
      color: #ff66b2;
      transform: rotate(90deg);
    }
    .sidebar ul {
      list-style: none;
      margin-top: 50px;
    }
    .sidebar ul li {
      margin-bottom: 22px;
    }
    .sidebar ul li a {
      text-decoration: none;
      color: #555;
      font-size: 19px;
      display: flex;
      align-items: center;
      padding: 10px 18px;
      border-radius: 12px;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    .sidebar ul li a i {
      margin-left: 12px;
      font-size: 20px;
      width: 25px;
      text-align: center;
      color: #ff66b2;
    }
    .sidebar ul li a:hover {
      color: #d23369;
      background: linear-gradient(to left, #fff0f6, #fff);
      transform: translateX(-8px);
      box-shadow: 3px 0 15px rgba(255,102,178,0.1);
    }
    /* شريط التمرير */
    .sidebar::-webkit-scrollbar {
      width: 6px;
    }
    .sidebar::-webkit-scrollbar-thumb {
      background-color: #ff8fab;
      border-radius: 3px;
    }
    /* طبقة التعتيم */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0,0,0,0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.4s ease, visibility 0.4s ease;
      backdrop-filter: blur(3px);
    }
    .overlay.active {
      opacity: 1;
      visibility: visible;
    }
    /* المحتوى الرئيسي */
    main {
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }
    main h2 {
      text-align: center;
      margin-bottom: 40px;
      color: #d23369;
      font-size: 2em;
      font-weight: 700;
      position: relative;
      padding-bottom: 15px;
    }
    main h2::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 50%;
      transform: translateX(50%);
      width: 80px;
      height: 3px;
      background: linear-gradient(to right, #ff66b2, #ff8fab);
      border-radius: 3px;
    }
    /* رسوم بيانية */
    .chart-container {
      position: relative;
      width: 100%;
      max-width: 650px;
      margin: 35px auto;
      height: 380px;
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 8px 25px rgba(255,102,178,0.1);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .chart-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(255,102,178,0.15);
    }
    .chart-container::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100%;
      background: linear-gradient(90deg, #f5f5f5 25%, #fff 50%, #f5f5f5 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      z-index: 1;
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    .chart-container.loaded::before {
      display: none;
    }
    .chart-container canvas {
      position: relative;
      z-index: 2;
      opacity: 0;
      transition: opacity 0.7s ease;
    }
    .chart-container.loaded canvas {
      opacity: 1;
    }
    /* الفوتر */
    footer {
      background: linear-gradient(to right, #d23369, #ff66b2);
      color: white;
      text-align: center;
      padding: 18px;
      font-size: 1em;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 99;
    }
    footer p {
      margin: 0;
    }
    /* إعدادات التجاوب */
    @media (max-width: 992px) {
      .sidebar { width: 260px; }
      .chart-container { height: 340px; }
    }
    @media (max-width: 768px) {
      header h1 { font-size: 1.4em; padding: 0 70px; }
      .chart-container { height: 300px; padding: 20px; }
      main h2 { font-size: 1.7em; }
      .sidebar ul li a { font-size: 18px; padding: 9px 16px; }
    }
    @media (max-width: 576px) {
      header { padding: 15px 0; }
      header h1 { font-size: 1.2em; padding: 0 65px; }
      .hamburger { left: 15px; font-size: 24px; }
      .translate-btn { right: 15px; padding: 7px 12px; font-size: 13px; }
      .sidebar { width: 240px; padding: 20px; }
      .chart-container { height: 270px; margin: 25px auto; padding: 15px; }
      main h2 { font-size: 1.5em; margin-bottom: 30px; }
      .sidebar ul li a { font-size: 17px; padding: 8px 14px; }
    }
    @media (max-width: 400px) {
      header h1 { font-size: 1.1em; padding: 0 60px; }
      .sidebar { width: 220px; }
      .chart-container { height: 240px; }
      .sidebar ul li a { font-size: 16px; }
    }
    [data-aos] { transition: all 0.8s ease; }
  </style>
</head>
<body>
  <!-- الهيدر -->
  <header>
    <span class="hamburger" onclick="toggleSidebar()"><i class="fas fa-bars"></i></span>
    <h1 data-translate="site_title">PARAMEDICAL LILYAN ROSE</h1>
    <!-- زر تبديل اللغة يحتوي على عنصر لعرض العلم وعنصر لعرض الاختصار -->
    <button class="translate-btn" onclick="switchLang()">
      <span id="flagIcon"></span>
      <span id="langText">AR</span>
    </button>
  </header>
  
  <!-- القائمة الجانبية -->
  <nav id="sidebar" class="sidebar">
    <button class="close-btn" onclick="toggleSidebar()">×</button>
    <ul>
      <li>
        <a href="index.html" data-aos="fade-left" data-aos-delay="100">
          <i class="fas fa-home"></i>
          <span data-translate="menu_home">الصفحة الرئيسية</span>
        </a>
      </li>
      <li>
        <a href="products.html" data-aos="fade-left" data-aos-delay="150">
          <i class="fas fa-box-open"></i>
          <span data-translate="menu_products">منتجات</span>
        </a>
      </li>
      <li>
        <a href="view-products.html" data-aos="fade-left" data-aos-delay="200">
          <i class="fas fa-list-ul"></i>
          <span data-translate="menu_view_products">عرض المنتجات</span>
        </a>
      </li>
      <li>
        <a href="sell-products.html" data-aos="fade-left" data-aos-delay="225">
          <i class="fas fa-cash-register"></i>
          <span data-translate="menu_sell_products">بيع المنتجات</span>
        </a>
      </li>
      <li>
        <a href="services.html" data-aos="fade-left" data-aos-delay="250">
          <i class="fas fa-concierge-bell"></i>
          <span data-translate="menu_services">خدمات اضافية</span>
        </a>
      </li>
      <li>
        <a href="profits.html" data-aos="fade-left" data-aos-delay="300">
          <i class="fas fa-chart-line"></i>
          <span data-translate="menu_profits">الارباح و الحسابات</span>
        </a>
      </li>
    </ul>
  </nav>
  <div id="overlay" class="overlay" onclick="toggleSidebar()"></div>
  
  <!-- المحتوى الرئيسي -->
  <main>
    <h2 id="mainTitle" data-aos="fade-down" data-translate="main_title">الرئيسية - رسوم بيانية للمبيعات</h2>
    <div class="chart-container" data-aos="fade-up">
      <canvas id="salesChart"></canvas>
    </div>
    <div class="chart-container" data-aos="fade-up" data-aos-delay="150">
      <canvas id="doughnutChart"></canvas>
    </div>
  </main>
  
  <!-- الفوتر -->
  <footer id="footerText" data-translate="footer_text">
    <p>جميع الحقوق محفوظة &copy; 2025 LILYAN ROSE</p>
  </footer>
  
  <!-- المكتبات الخارجية -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script>
    // تهيئة AOS وتحديث واجهة اللغة عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      AOS.init({
        duration: 800,
        once: true,
        easing: 'ease-out-quart'
      });
      // تحديث زر اللغة (العلم والنص)
      updateLanguageUI();
      // تحميل ملف الترجمة إذا كانت اللغة المختارة غير العربية
      const selectedLang = localStorage.getItem("selectedLanguage") || "ar";
      if(selectedLang !== "ar") {
        fetch(`lang/${selectedLang}.json`)
          .then(response => response.json())
          .then(translations => {
            applyTranslations(translations);
          })
          .catch(error => console.error("Error loading translations:", error));
      }
      // تهيئة الرسوم البيانية
      initCharts();
    });
    
    /* --- دوال القائمة الجانبية --- */
    let isSidebarOpen = false;
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const body = document.body;
      isSidebarOpen = !isSidebarOpen;
      if(isSidebarOpen) {
        sidebar.classList.add("active");
        overlay.classList.add("active");
        body.style.overflow = "hidden";
      } else {
        sidebar.classList.remove("active");
        overlay.classList.remove("active");
        body.style.overflow = "";
      }
    }
    
    /* --- دوال تبديل اللغة والعلم --- */
    function switchLang() {
      const currentLang = localStorage.getItem("selectedLanguage") || "ar";
      const newLang = currentLang === "ar" ? "fr" : "ar";
      localStorage.setItem("selectedLanguage", newLang);
      location.reload();
    }
    function updateLanguageUI() {
      const selectedLang = localStorage.getItem("selectedLanguage") || "ar";
      const langText = document.getElementById("langText");
      if(selectedLang === "ar") {
        langText.textContent = "AR";
        setMoroccoFlag();
      } else if(selectedLang === "fr") {
        langText.textContent = "FR";
        setFranceFlag();
      }
    }
   function setMoroccoFlag() {
  const flagIcon = document.getElementById("flagIcon");
  if (flagIcon) {
    flagIcon.innerHTML = `
      <svg width="24" height="16" viewBox="0 0 60 40" xmlns="http://www.w3.org/2000/svg">
        <rect width="60" height="40" fill="#C1272D"/>
        <polygon fill="#006233" points="
          30,12 
          32.35,16.76 
          37.61,17.53 
          33.80,21.24 
          34.70,26.47 
          30,24 
          25.30,26.47 
          26.20,21.24 
          22.39,17.53 
          27.65,16.76
        "/>
      </svg>
    `;
  }
  document.getElementById("langText").textContent = "AR";
}

    function setFranceFlag() {
  const flagIcon = document.getElementById("flagIcon");
  if (flagIcon) {
    flagIcon.innerHTML = `
      <svg width="24" height="16" viewBox="0 0 60 40" xmlns="http://www.w3.org/2000/svg">
        <rect width="20" height="40" fill="#0055A4"></rect>
        <rect x="20" width="20" height="40" fill="white"></rect>
        <rect x="40" width="20" height="40" fill="#EF4135"></rect>
      </svg>
    `;
  }
  document.getElementById("langText").textContent = "FR";
}

    
    /* --- دوال الترجمة باستخدام data-translate --- */
    function applyTranslations(translations) {
      document.querySelectorAll("[data-translate]").forEach(element => {
        const key = element.getAttribute("data-translate");
        const translatedText = resolveTranslation(translations, key);
        if(translatedText) {
          element.textContent = translatedText;
        }
      });
    }
    function resolveTranslation(obj, key) {
      return key.split(".").reduce((current, part) => current && current[part], obj);
    }
    
    /* --- تهيئة الرسوم البيانية باستخدام Chart.js --- */
    function initCharts() {
      if (typeof Chart === "undefined") {
        setTimeout(initCharts, 100);
        return;
      }
      // إضافة فئة "loaded" لتوقيف تأثير الشيمر
      const chartContainers = document.querySelectorAll(".chart-container");
      chartContainers.forEach(container => {
        container.classList.add("loaded");
      });
      const salesData = {
        labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],
        datasets: [{
          label: 'المبيعات (بالآلاف)',
          data: [18, 25, 12, 15, 8, 14],
          backgroundColor: 'rgba(255,105,180,0.7)',
          borderColor: 'rgba(255,105,180,1)',
          borderWidth: 2,
          borderRadius: 6,
          hoverBackgroundColor: 'rgba(255,105,180,0.9)'
        }]
      };
      const doughnutData = {
        labels: ['منتج أ', 'منتج ب', 'منتج ج', 'منتج د'],
        datasets: [{
          label: 'توزيع المنتجات',
          data: [30, 25, 20, 25],
          backgroundColor: [
            'rgba(255,105,180,0.7)',
            'rgba(255,179,217,0.7)',
            'rgba(255,204,229,0.7)',
            'rgba(255,228,242,0.7)'
          ],
          borderColor: [
            'rgba(255,105,180,1)',
            'rgba(255,179,217,1)',
            'rgba(255,204,229,1)',
            'rgba(255,228,242,1)'
          ],
          borderWidth: 1,
          hoverOffset: 10
        }]
      };
      const commonOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
            rtl: true,
            labels: {
              font: {
                size: window.innerWidth < 576 ? 11 : 13,
                family: 'Tajawal'
              },
              padding: 20,
              usePointStyle: true,
              pointStyle: 'circle'
            }
          },
          tooltip: {
            bodyFont: { family: 'Tajawal' },
            callbacks: {
              label: function(context) {
                return `${context.label}: ${context.raw}%`;
              }
            }
          }
        }
      };
      new Chart(
        document.getElementById('salesChart').getContext('2d'),
        {
          type: 'bar',
          data: salesData,
          options: {
            ...commonOptions,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  stepSize: 5,
                  font: { family: 'Tajawal' }
                },
                grid: { color: 'rgba(0,0,0,0.05)' }
              },
              x: {
                grid: { display: false },
                ticks: { font: { family: 'Tajawal' } }
              }
            }
          }
        }
      );
      new Chart(
        document.getElementById('doughnutChart').getContext('2d'),
        {
          type: 'doughnut',
          data: doughnutData,
          options: {
            ...commonOptions,
            cutout: '65%',
            plugins: {
              legend: {
                position: window.innerWidth < 768 ? 'bottom' : 'right'
              }
            }
          }
        }
      );
    }
  </script>
</body>
</html>
